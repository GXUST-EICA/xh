<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="Cache-Control" content="max-age=604800, public">
	<link rel="preload" href="style/marked.min.js" as="script">
	<link rel="preload" href="test/md/index.md" as="fetch">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title>åµŒå…¥å¼æ™ºæ§åä¼šåŸ¹è®­ä¸­å¿ƒ</title>
	<style>
		:root {
			--primary: #6c5ce7;
			--secondary: #a8a4e6;
			--accent: #ff6b6b;
			--background: linear-gradient(160deg, #f8f9ff 0%, #f3f5ff 100%);
			--glass: rgba(255, 255, 255, 0.95);
			--shadow: 0 12px 40px rgba(108, 92, 231, 0.1);
			--radius: 16px;
			/* ç»Ÿä¸€åœ†è§’ */
			--tap-highlight: rgba(108, 92, 231, 0.1);
			/* ç‚¹å‡»åé¦ˆè‰² */
		}

		/* åŠ¨æ€ç›®å½•ç”Ÿæˆæ ·å¼ */
		/* åˆå¹¶.toc-categoryæ ·å¼ */
		.toc-category {
			background: var(--glass);
			backdrop-filter: blur(12px);
			border-radius: var(--radius);
			margin: 1rem 0;
			padding: 1rem;
			box-shadow: var(--shadow);
			transition: transform 0.2s ease;
			position: relative;
			-webkit-tap-highlight-color: var(--tap-highlight);
		}

		/* åˆå¹¶åçš„åª’ä½“æŸ¥è¯¢ */
		@media (max-width: 768px) {
			.toc-category {
				margin: 0.5rem 0;
				background: rgba(255, 255, 255, 0.9);
			}
		}

		@media (min-width: 769px) {
			.toc-category {
				margin: 0.5rem 1rem;
			}
		}

		/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
		@media (max-width: 768px) {
			.sidebar {
				display: none;
				/* éšè—åŸå§‹ä¾§è¾¹æ  */
			}

			/* æ–°å¢æµ®åŠ¨ç›®å½•æŒ‰é’® */
			.floating-toc {
				position: fixed;
				bottom: 2rem;
				right: 1.5rem;
				z-index: 1000;
				width: 56px;
				height: 56px;
				border-radius: 50%;
				background: var(--primary);
				box-shadow: 0 8px 24px rgba(108, 92, 231, 0.3);
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}

			.floating-toc::after {
				content: 'ğŸ“š';
				font-size: 1.8rem;
				filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
			}

			.floating-toc.active {
				transform: rotate(135deg);
				background: var(--accent);
			}

			/* ç›®å½•å¼¹å‡ºå±‚ */
			.toc-overlay {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(8px);
				z-index: 999;
				opacity: 0;
				visibility: hidden;
				transition: 0.3s ease;
			}

			.toc-overlay.active {
				opacity: 1;
				visibility: visible;
			}

			/* ç›®å½•å®¹å™¨ */
			.mobile-toc {
				position: absolute;
				bottom: calc(56px + 2rem);
				right: 1.5rem;
				width: 86vw;
				max-width: 320px;
				background: var(--glass);
				border-radius: 24px;
				padding: 1.5rem;
				box-shadow: var(--shadow);
				transform: translateY(20px);
				transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28),
					opacity 0.2s ease;
				max-height: 70vh;
				overflow-y: auto;
				-webkit-overflow-scrolling: touch;
				scrollbar-width: thin;
				/* Firefox */
				scrollbar-color: var(--primary) rgba(0, 0, 0, 0.1);
				overflow-x: hidden;
				/* æ–°å¢æ¨ªå‘æ»šåŠ¨éšè— */
				width: calc(100% - 2rem);
				/* ç¡®ä¿å®½åº¦é€‚é… */
				will-change: transform;
			}

			.toc-overlay.active .mobile-toc {
				transform: translateY(0);
			}

			/* ç§»åŠ¨ç«¯ç›®å½•é¡¹ä¼˜åŒ– */
			.toc-category {
				margin: 0.5rem 0;
				background: rgba(255, 255, 255, 0.9);
				width: 100%;
				box-sizing: border-box;
			}

			.toc-subitem {
				padding: 1rem;
				font-size: 0.95rem;
				border-radius: 12px;
				margin: 4px 0;
				white-space: normal;
				/* ç¡®ä¿æ–‡æœ¬æ¢è¡Œ */
				max-width: 100%;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			/* æœç´¢æ¡†ä¼˜åŒ– */
			.mobile-toc .search-box {
				padding: 0 1rem 1rem;
				margin: 0 -1rem;
			}

			.mobile-toc #search {
				font-size: 1rem;
				padding: 1rem;
			}

			/* ä¿è¯å†…å®¹è¶³å¤Ÿé«˜åº¦ */
			.toc {
				min-height: 120%;
			}

			/* ä¼˜åŒ–æ»šåŠ¨æ¡æ ·å¼ */
			.mobile-toc::-webkit-scrollbar {
				width: 8px;
				/* å¢å¤§æ»šåŠ¨æ¡å®½åº¦ */
				background: rgba(0, 0, 0, 0.05);
			}

			.mobile-toc::-webkit-scrollbar-thumb {
				background: var(--primary);
				border-radius: 4px;
				border: 2px solid rgba(255, 255, 255, 0.2);
				/* æ·»åŠ è¾¹æ¡†å¢å¼ºå¯è§†æ€§ */
			}

			/* å¢å¼ºè§¦æ‘¸åé¦ˆ */
			.toc-category,
			.toc-subitem {
				padding: 16px !important;
				/* å¢å¤§ç‚¹å‡»åŒºåŸŸ */
				min-height: 56px;
				/* æœ€å°è§¦æ‘¸é«˜åº¦ */
				-webkit-tap-highlight-color: var(--tap-highlight);
			}

			/* éšè—æ¨ªå‘æ»šåŠ¨æ¡ */
			.mobile-toc::-webkit-scrollbar:horizontal {
				display: none;
				height: 0;
			}
		}

		/* PCç«¯å¸ƒå±€ä¼˜åŒ– */
		@media (min-width: 769px) {
			body {
				display: flex;
				min-height: 100vh;
			}

			.sidebar {
				width: 300px;
				height: 100vh;
				position: sticky;
				top: 0;
				overflow-y: auto;
				/* ç¡®ä¿ä¾§è¾¹æ æœ‰ç‹¬ç«‹çš„æ»šåŠ¨æ¡ */
				transform: none !important;
				box-shadow: 8px 0 40px rgba(108, 92, 231, 0.1);
				border-right: 1px solid var(--secondary);
				scrollbar-width: thin;
				/* Firefox */
				-ms-overflow-style: none;
				/* IE/Edge */
			}

			.sidebar::-webkit-scrollbar {
				display: block;
				/* æ˜¾ç¤ºæ»šåŠ¨æ¡ */
				width: 8px;
				/* æ»šåŠ¨æ¡å®½åº¦ */
			}

			.sidebar::-webkit-scrollbar-thumb {
				background: var(--primary);
				border-radius: 4px;
				/* åœ†è§’ */
			}

			.content {
				flex: 1;
				padding: 2rem 4rem;
				max-width: calc(100vw - 300px);
				overflow-y: auto;
				/* æ·»åŠ ç‹¬ç«‹æ»šåŠ¨ */
				height: calc(100vh - 3px);
				/* ç•™å‡ºè¿›åº¦æ¡ç©ºé—´ */
			}

			.menu-toggle {
				display: none;
				/* éšè—ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
			}

			.search-box {
				position: sticky;
				top: 0;
				padding: 1.5rem;
				margin: 0 -1.5rem;
				/* æŠµæ¶ˆå®¹å™¨padding */
				z-index: 200;
				background: var(--glass);
				backdrop-filter: blur(10px);
			}

			.toc-category {
				margin: 0.5rem 1rem;
				transition: 0.2s all ease;
			}

			.toc-subitem {
				padding: 0.8rem 1.5rem;
				cursor: pointer;
				border-radius: 8px;
				transition: 0.2s all ease;
			}

			.toc-subitem:hover {
				background: rgba(108, 92, 231, 0.1);
			}
		}

		/* æœç´¢æ¡†ç°ä»£åŒ–æ ·å¼ */
		.search-box {
			position: sticky;
			top: 0;
			background: var(--glass);
			backdrop-filter: blur(10px);
			z-index: 200;
			padding: 1rem;
			transition: all 0.3s ease;
			width: calc(100% - 3rem);
			margin: 0 auto;
			box-sizing: border-box;
		}

		#mobile-search {
			width: 100%;
			padding: 1rem 2rem;
			border: 1px solid var(--secondary) !important;
			border-radius: 50px;
			background: rgba(255, 255, 255, 0.9);
			box-shadow: 0 2px 8px rgba(108, 92, 231, 0.1) !important;
			font-size: 1rem;
			transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%236c5ce7' d='M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z'/%3E%3C/svg%3E");
			background-repeat: no-repeat;
			background-position: 1rem center;
			background-size: 1.2em;
			padding-left: 2.8rem;
			max-width: 100%;
			box-sizing: border-box;
		}

		#mobile-search:focus {
			outline: none;
			box-shadow: 0 6px 16px rgba(108, 92, 231, 0.2);
			background: rgba(255, 255, 255, 0.95);
		}

		#mobile-search::placeholder {
			color: #a8a4e6;
			opacity: 0.8;
		}

		/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
		@media (max-width: 768px) {
			#mobile-search {
				font-size: 0.95rem;
				padding: 0.8rem 1.5rem;
				padding-left: 2.5rem;
				background-size: 1em;
			}
		}

		/* ç§»åŠ¨ç«¯èœå•æŒ‰é’®ä¼˜åŒ– */
		.menu-toggle {
			position: fixed;
			top: 1rem;
			left: 1rem;
			z-index: 300;
			background: var(--glass);
			border: none;
			padding: 0.8rem;
			border-radius: 50%;
			box-shadow: var(--shadow);
			-webkit-tap-highlight-color: var(--tap-highlight);
		}

		/* æ–°å¢é˜…è¯»è¿›åº¦æ¡ */
		.progress-bar {
			display: block;
			position: fixed;
			top: 0;
			left: 0;
			height: 3px;
			background: var(--accent);
			z-index: 500;
			transition: width 0.2s ease-out;
		}

		/* ä¼˜åŒ–ç§»åŠ¨ç«¯ç›®å½•äº¤äº’ */
		.toc-category h3 {
			cursor: pointer;
			padding: 12px;
			margin: -12px;
			border-radius: var(--radius);
			-webkit-tap-highlight-color: var(--tap-highlight);
		}

		.toc-category[data-fold="true"] .toc-subitem {
			display: none;
		}

		/* å¢å¼ºæœç´¢é«˜äº® */
		.highlight {
			background: linear-gradient(90deg, #ffd70033, #ffd70000);
			border-radius: 4px;
		}

		/* æ–°å¢Markdownå†…å®¹æ ·å¼ */
		.markdown-content {
			padding: 2rem;
			margin: 1rem auto;
			max-width: 800px;
			background: var(--glass);
			border-radius: var(--radius);
			box-shadow: var(--shadow);
		}

		/* æ ‡é¢˜æ ·å¼ */
		.markdown-content h1,
		.markdown-content h2,
		.markdown-content h3 {
			color: var(--primary);
			margin-top: 1.5rem;
			margin-bottom: 0.5rem;
			border-bottom: 2px solid var(--secondary);
			/* å¢åŠ åº•éƒ¨è¾¹æ¡† */
			padding-bottom: 0.5rem;
			/* å¢åŠ åº•éƒ¨å†…è¾¹è· */
		}

		.markdown-content h1 {
			font-size: 2.5rem;
		}

		.markdown-content h2 {
			font-size: 2rem;
		}

		.markdown-content h3 {
			font-size: 1.5rem;
		}

		/* æ®µè½æ ·å¼ */
		.markdown-content p {
			margin: 1.2rem 0;
			/* å¢åŠ æ®µè½é—´è· */
			line-height: 1.6;
			/* å¢åŠ è¡Œé«˜ */
		}

		/* åˆ—è¡¨æ ·å¼ */
		.markdown-content ul,
		.markdown-content ol {
			margin: 1.5rem 0;
			/* å¢åŠ åˆ—è¡¨é—´è· */
			padding-left: 1.5rem;
		}

		.markdown-content li {
			margin-bottom: 0.5rem;
		}

		/* å¼•ç”¨æ ·å¼ */
		.markdown-content blockquote {
			background: rgba(108, 92, 231, 0.05);
			border-left: 4px solid var(--primary);
			padding: 1rem;
			margin: 1.5rem 0;
			border-radius: 0 8px 8px 0;
			font-style: italic;
			/* å¼•ç”¨å†…å®¹æ–œä½“ */
		}

		/* ä»£ç å—æ ·å¼ */
		.markdown-content pre {
			background: rgba(108, 92, 231, 0.05);
			padding: 1rem;
			border-radius: 8px;
			overflow-x: auto;
			border: 1px solid var(--secondary);
			/* æ·»åŠ è¾¹æ¡† */
		}

		.markdown-content code {
			background: rgba(108, 92, 231, 0.1);
			padding: 0.2rem 0.4rem;
			border-radius: 4px;
		}

		/* å¢åŠ é“¾æ¥æ ·å¼ */
		.markdown-content a {
			color: var(--primary);
			text-decoration: underline;
		}

		.markdown-content a:hover {
			text-decoration: none;
			color: var(--accent);
		}

		/* ä¼˜åŒ–ç§»åŠ¨ç«¯ç›®å½•å¸ƒå±€ */
		.mobile-toc {
			padding: 1rem;
			bottom: calc(56px + 1.5rem);
		}

		.toc-category {
			margin: 0.5rem -0.5rem;
			padding: 0.5rem;
		}

		.toc-subitem {
			margin: 4px -0.5rem;
			padding: 0.8rem 1rem !important;
		}

		/* æ·»åŠ åˆå§‹é¡µé¢çš„ä¸“å±æ ·å¼ */
		.markdown-content h1 {
			text-align: center;
			margin: 2rem 0;
			font-size: 2.5rem;
			background: linear-gradient(135deg, var(--primary), var(--accent));
			-webkit-background-clip: text;
			background-clip: text;
			-webkit-text-fill-color: transparent;
		}

		.markdown-content mermaid {
			display: block;
			margin: 2rem auto;
			max-width: 100%;
			overflow-x: auto;
		}

		.markdown-content table {
			width: 100%;
			border-collapse: collapse;
			margin: 1.5rem 0;
			background: var(--glass);
		}

		.markdown-content td,
		.markdown-content th {
			padding: 1rem;
			border: 1px solid var(--secondary);
		}

		blockquote {
			background: rgba(108, 92, 231, 0.05);
			border-left: 4px solid var(--primary);
			padding: 1rem;
			margin: 1.5rem 0;
			border-radius: 0 8px 8px 0;
		}

		/* é€šç”¨æ»šåŠ¨ä¼˜åŒ– */
		.toc,
		.mobile-toc,
		.sidebar {
			overflow: overlay;
			/* æ™ºèƒ½æ»šåŠ¨æ¡ */
			scroll-behavior: smooth;
		}

		/* ä¿®å¤ç§»åŠ¨ç«¯ç›®å½•ç©ºç™½é—®é¢˜ */
		@media (max-width: 768px) {
			.mobile-toc {
				width: 90vw;
				right: 1rem;
				margin: 0;
				padding: 1rem;
			}

			.toc-category,
			.toc-subitem {
				margin-left: 0;
				margin-right: 0;
				padding: 0.8rem 1rem;
			}
		}

		/* æ¬¢è¿é¡µä¸“å±æ ·å¼ */
		.feature-badges {
			display: flex;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.badge {
			padding: 0.5rem 1rem;
			border-radius: 20px;
			font-size: 0.9rem;
		}

		.badge.new {
			background: var(--accent);
			color: white;
		}

		.quick-start-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
			gap: 1.5rem;
			margin: 2rem 0;
		}

		.step-card {
			background: var(--glass);
			padding: 1.5rem;
			border-radius: var(--radius);
			transition: transform 0.2s ease;
		}

		.step-card:hover {
			transform: translateY(-5px);
		}

		.mobile-features {
			display: flex;
			flex-wrap: wrap;
			gap: 1rem;
			margin: 2rem 0;
		}

		.feature-tag {
			display: flex;
			align-items: center;
			padding: 0.8rem 1.2rem;
			background: rgba(108, 92, 231, 0.1);
			border-radius: 8px;
		}

		/* åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨ */
		.loading-indicator {
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 2rem;
			min-height: 300px;
		}

		.spinner {
			width: 40px;
			height: 40px;
			border: 4px solid rgba(108, 92, 231, 0.2);
			border-top-color: var(--primary);
			border-radius: 50%;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}

		/* é”™è¯¯æç¤ºæ ·å¼ */
		.error-message {
			text-align: center;
			padding: 2rem;
			background: rgba(255, 0, 0, 0.05);
			border-radius: 8px;

			button {
				margin-top: 1rem;
				padding: 0.5rem 1rem;
				background: var(--primary);
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
			}
		}

		/* Markdownå†…å®¹æ¸æ˜¾åŠ¨ç”» */
		.markdown-content {
			animation: fadeIn 0.5s ease-out;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		/* PCç«¯å¸ƒå±€ä¼˜åŒ– */
		@media (min-width: 769px) {
			.sidebar {
				overflow-y: auto !important;
				/* å¼ºåˆ¶ç‹¬ç«‹æ»šåŠ¨ */
			}

			.content {
				overflow-y: auto;
				/* æ·»åŠ ç‹¬ç«‹æ»šåŠ¨ */
				height: calc(100vh - 3px);
				/* ç•™å‡ºè¿›åº¦æ¡ç©ºé—´ */
			}
		}

		/* ç§»åŠ¨ç«¯æ»šåŠ¨ä¼˜åŒ– */
		@media (max-width: 768px) {
			.mobile-toc {
				scroll-behavior: smooth;
				-webkit-overflow-scrolling: touch;
				/* å¢åŠ å¼¹æ€§æ•ˆæœ */
				overscroll-behavior: contain;
				height: calc(100vh - 120px);
				/* ç¡®ä¿æœ‰è¶³å¤Ÿçš„é«˜åº¦ */
				overflow-y: auto;
			}

			/* å¢å¤§è§¦æ‘¸åŒºåŸŸ */
			.toc-category,
			.toc-subitem {
				min-height: 48px;
				/* æœ€å°è§¦æ‘¸é«˜åº¦ */
				padding: 12px !important;
			}
		}

		/* é€šç”¨æ»šåŠ¨ä¼˜åŒ– */
		.toc,
		.mobile-toc,
		.sidebar {
			overflow: overlay;
			/* æ™ºèƒ½æ»šåŠ¨æ¡ */
			scroll-behavior: smooth;
		}

		/* æ–°å¢mermaidæ ·å¼ä¼˜åŒ– */
		.markdown-content .mermaid {
			background: rgba(255, 255, 255, 0.9);
			padding: 1.5rem;
			border-radius: var(--radius);
			margin: 2rem 0;
			overflow: auto;
		}

		/* ä»£ç å—å¤åˆ¶æŒ‰é’® */
		.copy-btn {
			position: absolute;
			right: 1rem;
			top: 0.5rem;
			padding: 0.3rem 0.8rem;
			background: var(--primary);
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			opacity: 0;
			transition: opacity 0.2s ease;
		}

		pre:hover .copy-btn {
			opacity: 1;
		}

		/* æ–°å¢ä¸‹è½½æŒ‰é’®æ ·å¼ */
		.download-btn {
			z-index: 1001;
			/* æå‡å±‚çº§åˆ°æœ€é«˜ */
			bottom: 2rem;
			right: 2rem;
			background: var(--primary);
			color: white;
			padding: 1rem 1.5rem;
			border-radius: 30px;
			box-shadow: 0 8px 24px rgba(108, 92, 231, 0.3);
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			display: flex;
			align-items: center;
			gap: 0.8rem;
		}

		.download-btn:hover {
			transform: translateY(-3px);
			background: var(--accent);
			box-shadow: 0 12px 32px rgba(255, 107, 107, 0.3);
		}

		.download-btn::after {
			content: 'â¬‡ï¸';
			font-size: 1.2rem;
		}

		@media (max-width: 768px) {
			.download-btn {
				bottom: 8rem;
				/* æå‡åˆ°æµ®åŠ¨ç›®å½•æŒ‰é’®ä¸Šæ–¹ */
				right: 1.5rem;
				padding: 1rem 1.5rem;
				/* å¢å¤§ç‚¹å‡»åŒºåŸŸ */
				font-size: 1rem;
				box-shadow: 0 8px 24px rgba(108, 92, 231, 0.4);
				/* å¢å¼ºé˜´å½± */
				border-radius: 28px;
				/* æ›´åœ†æ¶¦çš„å½¢çŠ¶ */
			}
		}

		/* æ–°å¢æ ¼å¼èœå• */
		.format-menu {
			position: absolute;
			bottom: 100%;
			right: 0;
			background: var(--glass);
			border-radius: 12px;
			padding: 0.5rem;
			box-shadow: var(--shadow);
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
			min-width: 140px;
		}

		.download-btn:hover .format-menu {
			opacity: 1;
			visibility: visible;
		}

		.format-option {
			padding: 0.8rem 1rem;
			border-radius: 8px;
			cursor: pointer;
			transition: background 0.2s ease;
			display: flex;
			gap: 0.8rem;
			align-items: center;
		}

		.format-option:hover {
			background: rgba(108, 92, 231, 0.1);
		}

		/* ç§»åŠ¨ç«¯é€‚é… */
		@media (max-width: 768px) {
			.download-btn {
				bottom: 5rem;
				/* é¿å…è¢«æµ®åŠ¨æŒ‰é’®é®æŒ¡ */
			}

			.format-menu {
				right: -50%;
				bottom: auto;
				top: 100%;
			}
		}

		/* ç¡®ä¿Markdownå†…å®¹ä¸ä¼šè¦†ç›–æŒ‰é’® */
		.markdown-content {
			position: relative;
			z-index: 1;
			/* ä¿æŒé»˜è®¤å±‚çº§ */
		}

		/* æ–°å¢å¤–å±‚æ»šåŠ¨é”å®š */
		body.toc-open {
			overflow: hidden;
			position: fixed;
			width: 100%;
			height: 100%;
		}

		.toc-overlay {
			touch-action: none;
			/* å®Œå…¨ç¦ç”¨å¤–å±‚è§¦æ‘¸æ»šåŠ¨ */
			overscroll-behavior: none;
		}

		.mobile-toc {
			overflow-y: auto;
			-webkit-overflow-scrolling: touch;
			transform: translateZ(0);
			/* å¼ºåˆ¶ç¡¬ä»¶åŠ é€Ÿ */
			backface-visibility: hidden;
			perspective: 1000px;
		}

		/* æ»šåŠ¨æ¡è§†è§‰ä¼˜åŒ– */
		.mobile-toc::-webkit-scrollbar {
			width: 6px;
			background: rgba(108, 92, 231, 0.05);
		}

		.mobile-toc::-webkit-scrollbar-thumb {
			background: var(--primary);
			border-radius: 3px;
		}

		/* ä¿®å¤å†…å®¹åŒºåŸŸæ»šåŠ¨ */
		.content {
			overflow-y: auto !important;
			-webkit-overflow-scrolling: touch;
			height: calc(100vh - 60px);
			/* ç•™å‡ºé¡¶éƒ¨ç©ºé—´ */
			padding: 1rem !important;
		}

		.markdown-content {
			min-height: 120vh;
			/* ç¡®ä¿å¯æ»šåŠ¨åŒºåŸŸ */
			overflow: visible !important;
		}

		/* å¢å¼ºè§¦æ‘¸æ»šåŠ¨ */
		.course-content {
			overscroll-behavior: contain;
			touch-action: pan-y;
		}

		@media (max-width: 768px) {
			.content {
				scroll-behavior: smooth;
				-webkit-overflow-scrolling: touch;
				/* å¢åŠ æ»šåŠ¨é˜»åŠ› */
				scroll-snap-type: y mandatory;
				overscroll-behavior-y: contain;
			}

			.markdown-content {
				/* å¢åŠ æ»šåŠ¨æƒ¯æ€§ */
				scroll-snap-stop: always;
				scroll-snap-align: start;

				/* ä¼˜åŒ–æ®µè½é—´è· */
				p,
				pre,
				table {
					margin: 1.2rem 0;
					scroll-snap-align: start;
				}
			}
		}

		/* å¢åŠ åŠ¨é‡æ»šåŠ¨æ•ˆæœ */
		@supports (-webkit-overflow-scrolling: touch) {
			.content {
				overflow-y: scroll;
			}
		}

		/* é‡å†™ä¸‹è½½æŒ‰é’®å®šä½ */
		.download-container {
			position: fixed;
			z-index: 9999;
			/* æœ€é«˜ä¼˜å…ˆçº§ */
			bottom: 2rem;
			right: 2rem;
		}

		/* ä¼˜åŒ–ç§»åŠ¨ç«¯æŒ‰é’®å°ºå¯¸ */
		@media (max-width: 768px) {
			.download-btn {
				padding: 0.8rem 1.2rem;
				font-size: 0.9rem;
				border-radius: 16px;
				bottom: 6rem;
				/* è°ƒæ•´ä½ç½®é¿å…é®æŒ¡ */
			}
		}

		#error-container {
			position: fixed;
			bottom: 1rem;
			right: 1rem;
			max-width: 300px;
			z-index: 9999;
		}

		.error-toast {
			background: rgba(255, 0, 0, 0.1);
			padding: 1rem;
			border-radius: 8px;
			margin: 0.5rem;
			animation: slideIn 0.3s ease;
		}

		/* æ›´æ–°å­—ä½“ */
		body {
			font-family: 'Arial', sans-serif;
			/* ä½¿ç”¨æ›´ç°ä»£çš„å­—ä½“ */
			color: #333;
			/* æ›´æ·±çš„æ–‡æœ¬é¢œè‰² */
			line-height: 1.6;
			/* å¢åŠ è¡Œé«˜ */
		}

		/* æŒ‰é’®æ ·å¼ */
		.download-btn,
		.copy-btn {
			transition: background 0.3s, transform 0.2s;
			/* å¢åŠ è¿‡æ¸¡æ•ˆæœ */
		}

		.download-btn:hover,
		.copy-btn:hover {
			transform: translateY(-2px);
			/* æ‚¬åœæ—¶è½»å¾®ä¸Šç§» */
			background: var(--accent);
			/* æ‚¬åœæ—¶èƒŒæ™¯è‰²å˜åŒ– */
		}

		/* å¢åŠ é˜´å½±æ•ˆæœ */
		.markdown-content {
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
			/* å¢åŠ é˜´å½± */
			border-radius: 8px;
			/* åœ†è§’ */
		}

		/* æ›´æ–°æ ‡é¢˜æ ·å¼ */
		h1,
		h2,
		h3 {
			color: var(--primary);
			/* ä½¿ç”¨ä¸»é¢˜è‰² */
			margin-bottom: 1rem;
			/* å¢åŠ åº•éƒ¨é—´è· */
		}

		/* æ›´æ–°è¾“å…¥æ¡†æ ·å¼ */
		#mobile-search {
			border: 1px solid var(--secondary);
			border-radius: 12px;
			/* åœ†è§’ */
			padding: 0.8rem;
			/* å¢åŠ å†…è¾¹è· */
		}

		/* æ›´æ–°æ»šåŠ¨æ¡æ ·å¼ */
		.mobile-toc::-webkit-scrollbar {
			width: 8px;
			/* å¢åŠ æ»šåŠ¨æ¡å®½åº¦ */
		}

		.mobile-toc::-webkit-scrollbar-thumb {
			background: var(--primary);
			border-radius: 4px;
			/* åœ†è§’ */
		}

		/* æ›´æ–°é”™è¯¯æç¤ºæ ·å¼ */
		.error-message {
			background: rgba(255, 0, 0, 0.1);
			border: 1px solid red;
			/* å¢åŠ è¾¹æ¡† */
			border-radius: 8px;
			/* åœ†è§’ */
		}

		/* æ›´æ–°åŠ è½½æŒ‡ç¤ºå™¨æ ·å¼ */
		.loading-indicator {
			background: rgba(255, 255, 255, 0.9);
			/* èƒŒæ™¯è‰² */
			border-radius: 8px;
			/* åœ†è§’ */
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			/* é˜´å½± */
		}

		/* ç›®å½•å®¹å™¨æ ·å¼ */
		.toc-category {
			margin: 0.5rem 0;
			background: rgba(255, 255, 255, 0.9);
			width: 100%;
			box-sizing: border-box;
			border-radius: 12px;
			/* åœ†è§’ */
			padding: 1rem;
			/* å¢åŠ å†…è¾¹è· */
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			/* æ·»åŠ é˜´å½± */
		}

		/* ç›®å½•é¡¹æ ·å¼ */
		.toc-subitem {
			padding: 1rem;
			font-size: 1rem;
			border-radius: 8px;
			/* åœ†è§’ */
			margin: 4px 0;
			transition: background 0.3s;
			/* å¢åŠ è¿‡æ¸¡æ•ˆæœ */
			cursor: pointer;
			/* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºä¸ºæ‰‹å‹ */
		}

		/* æ‚¬åœæ•ˆæœ */
		.toc-subitem:hover {
			background: rgba(108, 92, 231, 0.1);
			/* æ‚¬åœæ—¶èƒŒæ™¯è‰²å˜åŒ– */
		}

		/* ç›®å½•æ ‡é¢˜æ ·å¼ */
		.toc-category h3 {
			margin: 0;
			font-size: 1.2rem;
			color: var(--primary);
			/* ä½¿ç”¨ä¸»é¢˜è‰² */
		}
	</style>
</head>

<body>
	<!-- æ–°å¢æµ®åŠ¨æŒ‰é’® -->
	<div class="floating-toc"></div>

	<!-- ä¿®æ”¹åçš„ç›®å½•ç»“æ„ -->
	<div class="toc-overlay">
		<div class="mobile-toc" id="mobile-toc-container">
			<div class="search-box">
				<input type="text" id="mobile-search" placeholder="      æœç´¢è¯¾ç¨‹..."
					style="width:100%; border-radius:12px; border:1px solid var(--secondary)">
			</div>
			<div class="toc" id="mobile-toc"></div>
		</div>
	</div>

	<!-- å†…å®¹åŒºåŸŸ -->
	<main class="content">
		<h1>åµŒå…¥å¼æ™ºæ§åä¼šåŸ¹è®­ä¸­å¿ƒ</h1>
		<div class="course-content" style="min-height: 200vh;">
			<article class="markdown-content" id="welcome-container">
				<!-- å†…å®¹å°†ç”±JavaScriptåŠ¨æ€åŠ è½½ -->
			</article>
		</div>
	</main>

	<!-- Markdownè§£æ -->
	<script src="style/marked.min.js"></script>

	<!-- æµç¨‹å›¾æ”¯æŒ -->
	<script src="style/mermaid.min.js"></script>

	<!-- å·¥å…·æç¤ºåº“ -->
	<script src="style/popper.min.js"></script>
	<script src="style/tippy-bundle.umd.js"></script>

	<div id="error-container" aria-live="polite"></div>

	<script>
		// åŠ¨æ€ç”Ÿæˆç›®å½•
		const courseFiles = [
			// ç¼–ç¨‹è¯­è¨€åŸºç¡€
			"/center/md/ç¼–ç¨‹è¯­è¨€åŸºç¡€ - Cè¯­è¨€.md",
			"/center/md/ç¼–ç¨‹è¯­è¨€åŸºç¡€ - Python.md",

			// ç¡¬ä»¶åŸºç¡€
			"/center/md/ç¡¬ä»¶åŸºç¡€çŸ¥è¯† - ç”µè·¯åŸºç¡€.md",
			"/center/md/ç¡¬ä»¶åŸºç¡€çŸ¥è¯† - MCUæ¦‚å¿µåŠæ¶æ„.md",

			// å•ç‰‡æœºåè®®
			"/center/md/å•ç‰‡æœºçš„åè®® - STM32.md",
			"/center/md/å•ç‰‡æœºçš„åè®® - ä¸²å£åŠ©æ‰‹.md",

			// å¼€å‘ç¯å¢ƒ
			"/center/md/å¼€å‘ç¯å¢ƒåŠå…¶å›ºä»¶åº“ - æ ‡å‡†åº“.md",
			"/center/md/å¼€å‘ç¯å¢ƒåŠå…¶å›ºä»¶åº“ - HALåº“.md",

			// PCBè®¾è®¡
			"/center/md/PCBè®¾è®¡ä¸åˆ¶ä½œ - å­¦ä¹ ä½¿ç”¨EDAå·¥å…·.md",
			"/center/md/PCBè®¾è®¡ä¸åˆ¶ä½œ - å…è´¹æ‰“æ ·æ¿.md",

			// æœºå™¨è§†è§‰
			"/center/md/æœºå™¨è§†è§‰ - åŸºç¡€è§†è§‰å¤„ç†ä¸Matlab.md",
			"/center/md/æœºå™¨è§†è§‰ - OpenMV.md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCVï¼ˆåˆè¯†ç¯‡ï¼‰.md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCV-Linuxç¯‡(ä¸€).md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCV-Linuxç¯‡(äºŒ).md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxç•ªå¤–ç¯‡-é…ç½®é¦™æ©™æ´¾zero3å¹¶ä½¿ç”¨opencv-pythonï¼ˆåä¼šä¸“ç”¨ï¼‰.md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCVï¼ˆCVä¸ç®—æ³•ç¯‡ï¼‰.md",
			"/center/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCVï¼ˆä»£ç è‡ªå¯åŠ¨ï¼‰.md",

			//ä¹é‘«ESP32ç‰©è”ç½‘
			"/center/md/ä¹é‘«ESP32ç‰©è”ç½‘ - ESP32ä¸Arduinoç¯å¢ƒåŸºç¡€.md",
			"/center/md/ä¹é‘«ESP32ç‰©è”ç½‘ - ESP32ä¸ESPIDFç¯å¢ƒåŸºç¡€.md",
			"/center/md/ä¹é‘«ESP32ç‰©è”ç½‘ - ESP32C3ä½¿ç”¨PlatformIOçƒ§å½•çš„é—®é¢˜.md",

		];

		// åŠ¨æ€ç”Ÿæˆç›®å½•ç»“æ„
		function generateTOC() {
			const tocMap = new Map();

			courseFiles.forEach(path => {
				const [category, filename] = path.split('/').pop().split(' - ');
				if (!tocMap.has(category)) {
					tocMap.set(category, []);
				}
				tocMap.get(category).push({
					name: filename.replace('.md', ''),
					path: path
				});
			});

			let tocHTML = '';
			tocMap.forEach((items, category) => {
				tocHTML += `
                    <div class="toc-category">
                        <h3>${category}</h3>
                        ${items.map(item => `
                            <div class="toc-subitem" data-file="${item.path}">
                                ${item.name}
                            </div>
                        `).join('')}
                    </div>
                `;
			});

			document.getElementById('mobile-toc').innerHTML = tocHTML;
		}

		// æµ®åŠ¨æŒ‰é’®äº¤äº’é€»è¾‘
		const floatingToc = document.querySelector('.floating-toc');
		const tocOverlay = document.querySelector('.toc-overlay');

		floatingToc.addEventListener('click', (e) => {
			e.stopPropagation();
			floatingToc.classList.toggle('active');
			tocOverlay.classList.toggle('active');
			document.body.classList.toggle('toc-open'); // æ–°å¢bodyçŠ¶æ€
		});

		// ç‚¹å‡»å¤–éƒ¨å…³é—­
		tocOverlay.addEventListener('click', (e) => {
			if (e.target === tocOverlay) {
				floatingToc.classList.remove('active');
				tocOverlay.classList.remove('active');
			}
		});

		// ä¿®æ”¹æœç´¢åŠŸèƒ½ï¼Œæ·»åŠ é˜²æŠ–å’Œç¼“å­˜
		// ä¿®æ”¹æœç´¢åŠŸèƒ½ï¼Œæ·»åŠ é˜²æŠ–
		function debounce(func, wait) {
			let timeout;
			return function (...args) {
				clearTimeout(timeout);
				timeout = setTimeout(() => func.apply(this, args), wait);
			};
		}

		document.getElementById('mobile-search').addEventListener('input', debounce((e) => {
			const term = e.target.value.trim().toLowerCase();
			document.querySelectorAll('.toc-subitem').forEach(item => {
				const text = item.textContent;
				const regex = new RegExp(`(${term})`, 'gi');
				item.innerHTML = term ?
					text.replace(regex, '<span class="highlight">$1</span>') :
					text;
				item.style.display = term ?
					(text.toLowerCase().includes(term) ? 'block' : 'none') :
					'block';
			});
		}, 300));

		// æ·»åŠ æ–‡ä»¶ç¼“å­˜
		const fileCache = new Map();
		async function loadFile(path) {
			if (fileCache.has(path)) return fileCache.get(path);
			try {
				const response = await fetch(path);
				const content = await response.text();
				fileCache.set(path, content);
				return content;
			} catch (error) {
				throw error;
			}
		}

		// ä¼˜åŒ–ç§»åŠ¨ç«¯ç‚¹å‡»ä½“éªŒ
		document.querySelectorAll('.toc-subitem').forEach(item => {
			item.addEventListener('click', () => {
				floatingToc.classList.remove('active');
				tocOverlay.classList.remove('active');
			});
		});

		// æ–°å¢åŠŸèƒ½ï¼šé˜…è¯»è¿›åº¦æ¡
		function setupProgressBar() {
			const progressBar = document.createElement('div');
			progressBar.className = 'progress-bar';
			document.body.prepend(progressBar);

			let rafId;
			function updateProgress() {
				const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
				const progress = Math.min(1, Math.max(0, window.scrollY / scrollHeight));
				progressBar.style.width = `${progress * 100}%`;
				rafId = requestAnimationFrame(updateProgress);
			}

			// ä½¿ç”¨IntersectionObserverä¼˜åŒ–æ€§èƒ½
			const observer = new IntersectionObserver(() => {
				if (document.documentElement.scrollHeight > window.innerHeight * 2) {
					rafId = requestAnimationFrame(updateProgress);
				} else {
					progressBar.style.width = '0';
				}
			}, { threshold: 0.1 });

			observer.observe(document.documentElement);

			// æ»šåŠ¨ç»“æŸéšè—ï¼ˆå¯é€‰ï¼‰
			let scrollTimeout;
			window.addEventListener('scroll', () => {
				clearTimeout(scrollTimeout);
				scrollTimeout = setTimeout(() => {
					cancelAnimationFrame(rafId);
				}, 100);
			});
		}

		// åˆå§‹åŒ–æ–°åŠŸèƒ½
		generateTOC();
		setupProgressBar();

		// ä¿®æ”¹å†…å®¹åŠ è½½é€»è¾‘é€‚é…PCç«¯å¸ƒå±€
		document.addEventListener('click', async (e) => {
			if (e.target.closest('.toc-subitem')) {
				// å¼ºåˆ¶æ‰€æœ‰è®¾å¤‡ç‚¹å‡»åç«‹å³æ»šåŠ¨åˆ°é¡¶éƒ¨
				window.scrollTo({
					top: 0,
					behavior: 'smooth'
				});

				// æ–°å¢ï¼šPCç«¯é¢å¤–å¤„ç†
				if (window.innerWidth > 768) {
					// åŒä¿é™©ï¼šç›´æ¥æ“ä½œæ»šåŠ¨å®¹å™¨
					document.documentElement.scrollTop = 0;
					document.scrollingElement.scrollTop = 0;
					document.querySelector('.content').scrollTop = 0;
				}

				// ç§»åŠ¨ç«¯ç‚¹å‡»åå…³é—­ç›®å½•
				if (window.innerWidth <= 768) {
					floatingToc.classList.remove('active');
					tocOverlay.classList.remove('active');
				}

				const contentArea = document.querySelector('.course-content');

				// ä¿®å¤ï¼šä½¿ç”¨å·²å®šä¹‰çš„loadingæ ·å¼ç±»
				contentArea.innerHTML = `
					<div class="loading-indicator">
						<div class="spinner"></div>
						<p>æ­£åœ¨åŠ è½½è¯¾ç¨‹å†…å®¹...</p>
					</div>
				`;

				const item = e.target.closest('.toc-subitem');
				const filePath = item.dataset.file;

				try {
					const response = await fetch(filePath);
					const markdown = await response.text();
					contentArea.innerHTML = `
                        <article class="markdown-content">
                            ${marked.parse(markdown)}
                        </article>
                    `;

					// æ–°å¢mermaidåˆå§‹åŒ–
					if (typeof mermaid !== 'undefined') {
						mermaid.init(undefined, '.markdown-content pre code.mermaid');
					}

					// PCç«¯è‡ªåŠ¨æ»šåŠ¨åˆ°æ ‡é¢˜ä½ç½®
					if (window.innerWidth > 768) {
						window.scrollTo({
							top: contentArea.offsetTop - 20,
							behavior: 'smooth'
						});
					}

					// ç¡®ä¿å†…å®¹æ’å…¥åå†æ¬¡å®šä½åˆ°é¡¶éƒ¨
					requestAnimationFrame(() => {
						window.scrollTo(0, 0);
						document.documentElement.scrollTop = 0;
					});

					// æ·»åŠ å†å²è®°å½•
					history.pushState({}, '', `#${encodeURIComponent(filePath)}`);
				} catch (error) {
					console.error('å†…å®¹åŠ è½½å¤±è´¥:', error);
				}
			}
		});

		// æ–°å¢æŒä¹…åŒ–å­˜å‚¨
		window.addEventListener('beforeunload', () => {
			localStorage.setItem('lastScroll', window.scrollY);
		});
		window.addEventListener('load', () => {
			const lastScroll = localStorage.getItem('lastScroll');
			if (lastScroll) window.scrollTo(0, lastScroll);
		});

		// ä¿®æ”¹åçš„ç§»åŠ¨ç«¯ç‚¹å‡»å¤–éƒ¨å…³é—­èœå•é€»è¾‘
		document.addEventListener('click', (e) => {
			if (window.innerWidth <= 768 &&
				!e.target.closest('.mobile-toc') &&
				!e.target.closest('.floating-toc')) {
				document.querySelector('.toc-overlay').classList.remove('active');
				document.body.classList.remove('toc-open');
			}
		});

		// æ›¿æ¢ä¸ºæ–°çš„æ»šåŠ¨å¤„ç†
		document.addEventListener('DOMContentLoaded', () => {
			const mobileToc = document.querySelector('.mobile-toc');
			if (mobileToc) {
				// ç¡®ä¿æ»šåŠ¨å®¹å™¨æ­£ç¡®è®¾ç½®
				mobileToc.style.overflowY = 'auto';
				mobileToc.style.webkitOverflowScrolling = 'touch';
				mobileToc.style.height = 'calc(100vh - 120px)';
			}
		});

		// ç§»é™¤å¤–å±‚æ»šåŠ¨é”å®š
		document.querySelector('.toc-overlay').removeEventListener('wheel', (e) => {
			if (e.target.closest('.mobile-toc')) {
				e.stopPropagation();
			}
		}, { passive: true });

		// é…ç½®å¯¹è±¡ï¼ˆæ–¹ä¾¿åç»­ç»´æŠ¤ï¼‰
		const CONFIG = {
			WELCOME_PAGE_PATH: '/test/md/index.md', // æ³¨æ„è·¯å¾„å‰ç¼€
			CACHE_TTL: 300000, // 5åˆ†é’Ÿç¼“å­˜
			FALLBACK_CONTENT: `# ğŸ‰ æ¬¢è¿ä½¿ç”¨\næš‚æ—¶æ— æ³•åŠ è½½æœ€æ–°å†…å®¹ï¼Œæ˜¾ç¤ºç¼“å­˜ç‰ˆæœ¬`
		};

		// å¢å¼ºç‰ˆå†…å®¹åŠ è½½å™¨
		class ContentLoader {
			constructor() {
				this.cache = null;
				this.lastFetch = 0;
			}

			async loadWelcomePage() {
				try {
					// ä¼˜å…ˆä½¿ç”¨æœ‰æ•ˆç¼“å­˜
					if (this._isCacheValid()) {
						return this.cache;
					}

					// å‘èµ·ç½‘ç»œè¯·æ±‚
					const response = await fetch(CONFIG.WELCOME_PAGE_PATH, {
						mode: 'cors',
						credentials: 'same-origin', // æ˜ç¡®å‡­è¯ç­–ç•¥
						headers: {
							'Content-Type': 'text/markdown',
							'X-Requested-With': 'XMLHttpRequest' // å¸®åŠ©æœåŠ¡å™¨è¯†åˆ«AJAXè¯·æ±‚
						}
					});

					// HTTPçŠ¶æ€æ£€æŸ¥
					if (!response.ok) {
						throw new Error(`HTTPé”™è¯¯ ${response.status}`);
					}

					// è§£æå†…å®¹
					const markdown = await response.text();
					const html = marked.parse(markdown);

					// æ›´æ–°ç¼“å­˜
					this._updateCache(html);
					return html;

				} catch (error) {
					console.error('å†…å®¹åŠ è½½å¤±è´¥:', error);
					return this._handleError(error);
				}
			}

			_isCacheValid() {
				return this.cache && (Date.now() - this.lastFetch < CONFIG.CACHE_TTL);
			}

			_updateCache(content) {
				this.cache = content;
				this.lastFetch = Date.now();
				localStorage.setItem('welcomeCache', JSON.stringify({
					content: content,
					timestamp: this.lastFetch
				}));
			}

			_loadFromStorage() {
				const stored = localStorage.getItem('welcomeCache');
				if (stored) {
					const { content, timestamp } = JSON.parse(stored);
					this.cache = content;
					this.lastFetch = timestamp;
				}
			}

			_handleError(error) {
				// å°è¯•åŠ è½½æœ¬åœ°ç¼“å­˜
				this._loadFromStorage();
				return this.cache || CONFIG.FALLBACK_CONTENT;
			}
		}

		// ä¿®å¤åˆå§‹åŒ–æµç¨‹ï¼šæ·»åŠ ç›®å½•ç”Ÿæˆå’Œæ¬¢è¿é¡µåŠ è½½
		document.addEventListener('DOMContentLoaded', async () => {
			generateTOC(); // ç¡®ä¿ç”Ÿæˆç›®å½•
			const container = document.getElementById('welcome-container');
			const loader = new ContentLoader();

			// æ˜¾ç¤ºåŠ è½½çŠ¶æ€
			container.innerHTML = `
				<div class="loading-indicator">
					<div class="spinner"></div>
					<p>æ­£åœ¨åŠ è½½æœ€æ–°å†…å®¹...</p>
				</div>
			`;

			try {
				// å¼‚æ­¥åŠ è½½å†…å®¹
				const content = await loader.loadWelcomePage();
				container.innerHTML = content;

				// åˆå§‹åŒ–å¯è§†åŒ–ç»„ä»¶
				initMermaid();  // ç§»é™¤éå¿…è¦çš„this
				initTooltips(); // ä½¿ç”¨ç‹¬ç«‹å‡½æ•°

			} catch (error) {
				container.innerHTML = `
					<div class="error-state">
						<h3>âš ï¸ å†…å®¹åŠ è½½å¤±è´¥</h3>
						<p>${error.message}</p>
						<button class="retry-btn">ç‚¹å‡»é‡è¯•</button>
					</div>
				`;

				// ç»‘å®šé‡è¯•æŒ‰é’®
				document.querySelector('.retry-btn').addEventListener('click', () => {
					location.reload();
				});
			}
		});

		// ä¿®å¤mermaidåˆå§‹åŒ–é€»è¾‘
		function initMermaid() {
			if (typeof mermaid !== 'undefined') {
				mermaid.initialize({
					theme: 'neutral',
					startOnLoad: true
				});
				// ä½¿ç”¨æ›´å¯é çš„é€‰æ‹©å™¨
				mermaid.init(undefined, '.markdown-content pre code.language-mermaid');
			}
		}

		// ä¿®æ”¹ä¸ºç‹¬ç«‹å‡½æ•°
		function initTooltips() {
			if (typeof tippy !== 'undefined') {
				tippy('[data-tippy-content]', {
					arrow: true,
					animation: 'fade',
					theme: 'light-border'
				});
			}
		}

		// ä¿®æ”¹markedæ¸²æŸ“å™¨ç¡®ä¿æ­£ç¡®æ·»åŠ mermaidç±»
		const renderer = new marked.Renderer();
		renderer.code = function (code, language) {
			const isMermaid = language === 'mermaid';
			return `
				<div style="position: relative">
					<pre class="${isMermaid ? 'mermaid' : ''}"><code class="language-${language}">${isMermaid ? code : escape(code)}</code></pre>
					${!isMermaid ? `<button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>` : ''}
				</div>
			`;
		};

		// æ·»åŠ å¤åˆ¶åŠŸèƒ½
		function copyCode(button) {
			const code = button.previousElementSibling.textContent;
			navigator.clipboard.writeText(code).then(() => {
				button.textContent = 'å·²å¤åˆ¶!';
				setTimeout(() => button.textContent = 'å¤åˆ¶', 2000);
			}).catch(err => {
				console.error('å¤åˆ¶å¤±è´¥:', err);
				button.textContent = 'å¤±è´¥';
			});
		}

		// ä¿®æ”¹ä¸‹è½½åŠŸèƒ½
		let currentContent = '';
		const downloadContainer = document.querySelector('.download-container');

		// åœ¨å†…å®¹åŠ è½½æ—¶ä¿å­˜åŸå§‹å†…å®¹
		function saveContent(rawMarkdown) {
			currentContent = rawMarkdown;
			// ä¿æŒä¸‹è½½æŒ‰é’®å¯è§
			downloadContainer.style.display = 'block';
		}

		// æ·»åŠ æ»šåŠ¨çŠ¶æ€æ£€æµ‹
		let scrollTimeout;
		mobileToc.addEventListener('scroll', () => {
			mobileToc.classList.add('scrolling');
			clearTimeout(scrollTimeout);
			scrollTimeout = setTimeout(() => {
				mobileToc.classList.remove('scrolling');
			}, 500);
		});

		// åœ¨DOMåŠ è½½å®Œæˆåè°ƒç”¨
		document.addEventListener('DOMContentLoaded', () => {
			initContentScroll();
		});

		// åœ¨è„šæœ¬éƒ¨åˆ†æ·»åŠ ä¸‹è½½åŠŸèƒ½
		document.getElementById('download-md').addEventListener('click', (e) => {
			const menu = e.currentTarget.querySelector('.format-menu');
			menu.style.opacity = menu.style.opacity === '1' ? '0' : '1';
			menu.style.visibility = menu.style.visibility === 'visible' ? 'hidden' : 'visible';
		});

		// å¢å¼ºç‰ˆä¸‹è½½å¤„ç†
		document.querySelectorAll('.format-option').forEach(option => {
			option.addEventListener('click', async (e) => {
				const btn = document.getElementById('download-md');
				const originalHTML = btn.innerHTML;

				// æ·»åŠ åŠ è½½çŠ¶æ€
				btn.classList.add('loading');
				btn.querySelector('.btn-text').innerHTML = 'â³ ç”Ÿæˆæ–‡ä»¶ä¸­...';

				try {
					const format = e.currentTarget.dataset.format;
					const title = document.querySelector('.markdown-content h1')?.textContent.trim() || 'document';

					if (format === 'md') {
						// Markdownä¸‹è½½
						const blob = new Blob([currentContent], { type: 'text/markdown' });
						triggerDownload(blob, `${title}.md`);
					} else {
						// Wordæ–‡æ¡£ç”Ÿæˆ
						const htmlContent = marked.parse(currentContent);
						const docxBlob = await convertToDocx(htmlContent);
						triggerDownload(docxBlob, `${title}.docx`);
					}
				} catch (error) {
					showErrorToast('ä¸‹è½½å¤±è´¥: ' + error.message);
				} finally {
					btn.classList.remove('loading');
					btn.querySelector('.btn-text').innerHTML = 'â¬‡ï¸ ä¸‹è½½æ–‡æ¡£';
				}
			});
		});

		// é€šç”¨ä¸‹è½½è§¦å‘æ–¹æ³•
		function triggerDownload(blob, filename) {
			const url = URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = filename;
			document.body.appendChild(a);
			a.click();
			document.body.removeChild(a);
			URL.revokeObjectURL(url);
		}

		// æ˜¾ç¤ºé”™è¯¯æç¤º
		function showErrorToast(message) {
			const toast = document.createElement('div');
			toast.className = 'download-toast';
			toast.textContent = message;
			document.body.appendChild(toast);

			setTimeout(() => {
				toast.remove();
			}, 3000);
		}

		// ä¿®å¤æ ¼å¼èœå•äº¤äº’
		document.getElementById('download-md').addEventListener('click', (e) => {
			const menu = e.currentTarget.querySelector('.format-menu');
			menu.style.opacity = menu.style.opacity === '1' ? '0' : '1';
			menu.style.visibility = menu.style.visibility === 'visible' ? 'hidden' : 'visible';
		});

		// ä¿®å¤DOCXè½¬æ¢åŠŸèƒ½
		async function convertToDocx(htmlContent) {
			try {
				const result = await htmlDocx.asBlob(htmlContent);
				return result;
			} catch (error) {
				throw new Error('DOCXè½¬æ¢å¤±è´¥: ' + error.message);
			}
		}

		// ä¿®å¤ç§»åŠ¨ç«¯èœå•äº¤äº’
		let menuTimeout;
		document.getElementById('download-md').addEventListener('touchstart', (e) => {
			const menu = e.currentTarget.querySelector('.format-menu');
			clearTimeout(menuTimeout);
			menu.style.opacity = '1';
			menu.style.visibility = 'visible';
			menuTimeout = setTimeout(() => {
				menu.style.opacity = '0';
				menu.style.visibility = 'hidden';
			}, 5000); // 5ç§’åè‡ªåŠ¨éšè—
		});

		// ä¿®å¤äº‹ä»¶ç›‘å¬å™¨ç©ºæŒ‡é’ˆé—®é¢˜
		document.addEventListener('DOMContentLoaded', () => {
			// ç¡®ä¿å…ƒç´ å­˜åœ¨å†ç»‘å®šäº‹ä»¶
			const mobileToc = document.querySelector('.mobile-toc');
			if (mobileToc) {
				mobileToc.addEventListener('scroll', handleTocScroll);
				mobileToc.addEventListener('touchstart', handleTouchStart, { passive: true });
				mobileToc.addEventListener('touchmove', handleTouchMove, { passive: false });
			}
		});

		// ä¼˜åŒ–åçš„è§¦æ‘¸å¤„ç†å‡½æ•°
		function handleTouchStart(e) {
			startY = e.touches[0].pageY;
		}

		function handleTouchMove(e) {
			const deltaY = e.touches[0].pageY - startY;
			const atTop = this.scrollTop <= 0 && deltaY > 0;
			const atBottom = this.scrollHeight <= this.clientHeight + this.scrollTop && deltaY < 0;

			if (atTop || atBottom) {
				e.preventDefault();
			}
		}

		function handleTocScroll() {
			this.classList.add('scrolling');
			clearTimeout(scrollTimeout);
			scrollTimeout = setTimeout(() => {
				this.classList.remove('scrolling');
			}, 500);
		}

		// ä¿®å¤ç©ºæŒ‡é’ˆé”™è¯¯çš„æ ¸å¿ƒä»£ç 
		function safeAddEventListener(selector, eventType, handler, options) {
			const element = document.querySelector(selector);
			if (element) {
				element.addEventListener(eventType, handler, options);
			} else {
				console.warn(`å…ƒç´  ${selector} ä¸å­˜åœ¨ï¼Œæ— æ³•ç»‘å®š ${eventType} äº‹ä»¶`);
			}
		}

		// å®‰å…¨åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
		document.addEventListener('DOMContentLoaded', () => {
			// ç›®å½•ç›¸å…³äº‹ä»¶
			safeAddEventListener('.mobile-toc', 'scroll', handleTocScroll);
			safeAddEventListener('.mobile-toc', 'touchstart', handleTouchStart, { passive: true });
			safeAddEventListener('.mobile-toc', 'touchmove', handleTouchMove, { passive: false });

			// å…¶ä»–å…³é”®äº‹ä»¶åˆå§‹åŒ–
			safeAddEventListener('.floating-toc', 'click', toggleTocOverlay);
			safeAddEventListener('.toc-overlay', 'click', closeTocOnOutsideClick);
		});

		// å¢å¼ºå‹é”™è¯¯å¤„ç†
		document.addEventListener('click', async (e) => {
			if (e.target.closest('.toc-subitem')) {
				try {
					// ... åŠ è½½é€»è¾‘ ...
				} catch (error) {
					console.error('å†…å®¹åŠ è½½å¤±è´¥:', error);
					showErrorToast(`åŠ è½½å¤±è´¥: ${error.message}`);
				}
			}
		});

		// æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†
		window.onerror = function (message, source, lineno, colno, error) {
			console.error(`å…¨å±€é”™è¯¯: ${message}@${source}:${lineno}`);
			return true; // é˜»æ­¢é»˜è®¤é”™è¯¯æç¤º
		};
	</script>
</body>

</html>